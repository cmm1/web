<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>demo</title>
  <script type="text/javascript" src="./static/js/vue.min.js"></script>
  <style>
    .class1{ 
      background: #444;
      color: #eee;
    }
  </style>
</head>

<body>
  <div id="app">
  </div>
  <div id="test">
    <h1 >{{ text }}</h1>
    <h1>{{ first() }}</h1>
    {{5+5}}<br>
    {{ text ? 'YES' : 'NO' }}<br>
    {{ text.split('').join(',') }}
  </div>
  <div id = "test2">
    <input type="checkbox" v-model="use" id="r1">
    <div id ="test3" :class="{'class1': use}">
      v-bind:class 指令
    </div>
    <h1 v-if="flag"><a @click="windows" :href="url">百度</a></h1>
    <input v-model="url">

    <h3>{{ url | joinStr}}</h3>

    <div v-if="Math.random() > 0.5">
      Sorry  
    </div>
    <div v-else>
      Not sorry
    </div>
    <ol>
      <li v-for="data in arrays">
        {{data}}
      </li>
    </ol>

    <p>计数器 {{counter}}</p>

    <!-- v-on:click可以缩写为： -->
    <button @click="counter++">加一</button>

    <test1></test1>

    <cmm></cmm>

    <input v-model="parentMsg"> <br>
    <!-- v-bind:message可以缩写为： -->
    <child :message = "parentMsg"></child><br>

    <input v-focus><br>
    <input v-focus1>
  </div>
</body>
<script type="text/javascript">
//注册全局组件
  Vue.component("test1",{
    template: '<p>这是一个全局组件，需要在头部声明！！<p>'
  });

  //注册全局指令
  Vue.directive('focus',{
    //钩子函数
    // bind: 只调用一次，指令第一次绑定到元素时调用，用这个钩子函数可以定义一个在绑定时执行一次的初始化动作。

    // inserted: 被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于 document 中）。

    // update: 被绑定元素所在的模板更新时调用，而不论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新（详细的钩子函数参数见下）。

    // componentUpdated: 被绑定元素所在模板完成一次更新周期时调用。

    // unbind: 只调用一次， 指令与元素解绑时调用。

//     钩子函数参数
// 钩子函数的参数有：

// el: 指令所绑定的元素，可以用来直接操作 DOM 。
// binding: 一个对象，包含以下属性：
// name: 指令名，不包括 v- 前缀。
// value: 指令的绑定值， 例如： v-my-directive="1 + 1", value 的值是 2。
// oldValue: 指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。
// expression: 绑定值的表达式或变量名。 例如 v-my-directive="1 + 1" ， expression 的值是 "1 + 1"。
// arg: 传给指令的参数。例如 v-my-directive:foo， arg 的值是 "foo"。
// modifiers: 一个包含修饰符的对象。 例如： v-my-directive.foo.bar, 修饰符对象 modifiers 的值是 { foo: true, bar: true }。
// vnode: Vue 编译生成的虚拟节点。
// oldVnode: 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。
      inserted: function(el){
        el.focus();
      }
    });

  //局部组件变量
  var Child = {
    template : '<p>这是一个局部组件，在根实例里注册，只有注册过的实例才能使用</p>!!'
  }

  //指令组件变量
  var Child1 = {
    props: ['message'],
    template: '<span>{{ message }}</span>'
  }
  var data = {text: "开始", site : "VUE"}
  //创建实例
  var vm = new Vue({
    el: '#test',
    data: data,
    methods: {
      first: function () {
        return data.site;
      }
    }
  })

  data.site="vue";
  // alert(data.site);
 var vm1 = new Vue({
    el: '#test2',
    //注册组件
    components:{
      'cmm':Child,
      'child':Child1
    },

    //注册局部指令
    directives: {
      focus1: {
        inserted: function (el) {
          el.focus()
        }
      }
  },
  //数据json
    data:{ 
      use: false,
      flag: true,
      url: "www.baidu.cn",
      arrays: ["1","2","3"],
      counter: 1,
      parentMsg: '父组件内容'
    },
    //定义函数
    methods: {
      windows(){
        alert(this.url);
      }
    },
    //定义拦截器
    filters: {
      joinStr(value){
        return value.replace("baidu","cmm1");
      }
    }
  });
  //监听方法
  vm1.$watch('counter',function(nval,oval){
    alert('计数器值的变化 :' + oval + ' 变为 ' + nval + '!');
  });


</script>

</html>